import{q as S,j as r,I as V,r as n,C as z,B as C,T as P}from"./chunk-BITFmjU1.js";import{P as W}from"./chunk-OF3yPMkr.js";import{T as D}from"./chunk-DNyHRjt3.js";import{T as G}from"./chunk-CQ0bSu_Q.js";const H=S(r.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"})),O=S(r.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"})),U=S(r.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),_={none:"none",asc:"ascending",desc:"descending"},b={asc:O,desc:U,none:H},F=e=>_[e],q=({sortOrder:e,onToggleSortOrder:a})=>{const c=b[e]??b.none;return r.jsx(D,{title:"Sort by Artwork Count",arrow:!0,children:r.jsx(V,{"aria-label":"Sort by Artwork Count","aria-pressed":e!=="none","aria-sort":F(e),onClick:a,color:e==="none"?"default":"primary",size:"medium",children:r.jsx(c,{})})})},u={container:{px:{xs:0},py:4},box:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",gap:3,mb:5,px:2},typography:{flexBasis:"100%",textAlign:"center",color:"text.primary",fontWeight:600,mb:2,letterSpacing:"0.05em"},textField:{maxWidth:300,flexGrow:1,minWidth:220},listGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",listStyle:"none",padding:0,margin:0,"@media (max-width:1024px)":{gridTemplateColumns:"repeat(3, 1fr)"},"@media (max-width:768px)":{gridTemplateColumns:"repeat(2, 1fr)"},"@media (max-width:480px)":{gridTemplateColumns:"1fr"}}},s="character",Q="artist",f="/touhou-translations/",w=25,X=({mode:e,characters:a,artists:c})=>{const j=e===s?"Character List":"Artist List",A=e===s?"Search Characters":"Search Artists";if(e===s&&!a||e===Q&&!c)throw new Error(`${e} data prop is required`);const d=n.useMemo(()=>e===s?a:c,[e,a,c]),[h,L]=n.useState(""),[p,k]=n.useState(""),[i,v]=n.useState("none"),[y,I]=n.useState(w),T=n.useRef(null),m=n.useMemo(()=>p?d.filter(({id:t,name:o})=>[t,o].some(l=>l.toLowerCase().includes(p.toLowerCase()))):d,[d,p]),x=n.useMemo(()=>i==="none"?m:[...m].sort((t,o)=>i==="asc"?t.artworkCount-o.artworkCount:o.artworkCount-t.artworkCount),[m,i]),$=()=>{v(t=>t==="none"?"desc":t==="desc"?"asc":"none")},E=()=>x.slice(0,y).map(t=>{const o=t.id,l=t.name,g=`${t.artworkCount} artwork${t.artworkCount!==1?"s":""}`,M=e===s?`${t.artistCount} artist${t.artistCount!==1?"s":""}`:`${t.characterCount} character${t.characterCount!==1?"s":""}`,R=`${f}${t.portrait}`,B=e===s?`${f}gallery?character=${o}`:`${f}gallery?artist=${o}`;return r.jsx(W,{name:l,imageUrl:R,description1:g,description2:M,link:B},o)});return n.useEffect(()=>{const t=setTimeout(()=>k(h),300);return()=>clearTimeout(t)},[h]),n.useEffect(()=>{const t=new IntersectionObserver(l=>{l[0].isIntersecting&&I(g=>Math.min(g+w,x.length))},{rootMargin:"100px"}),o=T.current;return o&&t.observe(o),()=>{o&&t.unobserve(o)}},[x]),n.useEffect(()=>{I(w)},[p,i]),r.jsxs(z,{maxWidth:"xl",sx:u.container,children:[r.jsxs(C,{sx:u.box,children:[r.jsx(P,{variant:"h4",component:"h2",sx:u.typography,children:j}),r.jsx(G,{label:"Search by ID or Name",variant:"outlined",value:h,sx:u.textField,onChange:t=>L(t.target.value),slotProps:{input:{"aria-label":A}}}),r.jsx(q,{sortOrder:i,onToggleSortOrder:$})]}),r.jsx(C,{component:"ul",sx:u.listGrid,children:E()}),y<x.length&&r.jsx(C,{ref:T,sx:{height:"1px"}})]})};export{X as L};
