import{r as A,a3 as I,R as K}from"./chunk-DByviqQX.js";function l(e){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},l(e)}function x(e,r){if(l(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var t=n.call(e,r);if(l(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function F(e){var r=x(e,"string");return l(r)=="symbol"?r:r+""}function w(e,r,n){return(r=F(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var $=(function(e){var r=e.decode,n=r===void 0?!0:r,t=e.crossOrigin,u=t===void 0?"":t;return function(c){return new Promise(function(f,a){var i=new Image;u&&(i.crossOrigin=u),i.onload=function(){n&&i.decode?i.decode().then(f).catch(a):f()},i.onerror=a,i.src=c})}});function j(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,t)}return n}function p(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?j(Object(n),!0).forEach(function(t){w(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=function(r){return r.filter(function(n){return n})},T=function(r){return Array.isArray(r)?r:[r]},s={},k=function(r,n){var t=!1;return new Promise(function(u,c){var f=function(i){return n(i).then(function(){t=!0,u(i)})};r.reduce(function(a,i){return a.catch(function(){if(!t)return f(i)})},f(r.shift())).catch(c)})};function q(e){var r=e.srcList,n=e.imgPromise,t=n===void 0?$({decode:!0}):n,u=e.useSuspense,c=u===void 0?!0:u,f=A.useState(!1),a=f[1],i=N(T(r)),o=i.join("");if(s[o]||(s[o]={promise:k(i,t),cache:"pending",error:null}),s[o].cache==="resolved")return{src:s[o].src,isLoading:!1,error:null};if(s[o].cache==="rejected"){if(c)throw s[o].error;return{isLoading:!1,error:s[o].error,src:void 0}}if(s[o].promise.then(function(d){s[o]=p(p({},s[o]),{},{cache:"resolved",src:d}),c||a(o)}).catch(function(d){s[o]=p(p({},s[o]),{},{cache:"rejected",error:d}),c||a(o)}),c)throw s[o].promise;return{isLoading:!0,src:void 0,error:null}}var B=["decode","src","loader","unloader","container","loaderContainer","unloaderContainer","imgPromise","crossorigin","useSuspense"];function S(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,t)}return n}function R(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?S(Object(n),!0).forEach(function(t){w(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(r){return r};function z(e){var r=e.decode,n=r===void 0?!0:r,t=e.src,u=t===void 0?[]:t,c=e.loader,f=c===void 0?null:c,a=e.unloader,i=a===void 0?null:a,o=e.container,d=o===void 0?v:o,y=e.loaderContainer,L=y===void 0?v:y,b=e.unloaderContainer,C=b===void 0?v:b,m=e.imgPromise,E=e.crossorigin,O=e.useSuspense,g=O===void 0?!1:O,D=I(e,B);m=m||$({decode:n,crossOrigin:E});var P=q({srcList:u,imgPromise:m,useSuspense:g}),h=P.src,_=P.isLoading;return h?d(K.createElement("img",R({src:h},D))):!g&&_?L(f):!g&&i?C(i):null}export{z as I};
