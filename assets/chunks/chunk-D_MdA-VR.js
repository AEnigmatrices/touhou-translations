import{c as S,j as r,I as z,r as n,z as V,x as f,T as B}from"./chunk-7AEGmnAT.js";import{P}from"./chunk-DGD-vn1b.js";import{T as W}from"./chunk-BvlSqZNu.js";import{T as D}from"./chunk-2RtweSdq.js";const G=S(r.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"})),H=S(r.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"})),O=S(r.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),U={none:"none",asc:"ascending",desc:"descending"},j={asc:H,desc:O,none:G},_=e=>U[e],F=({sortOrder:e,onToggleSortOrder:s})=>{const a=j[e]??j.none;return r.jsx(W,{title:"Sort by Artwork Count",arrow:!0,children:r.jsx(z,{"aria-label":"Sort by Artwork Count","aria-pressed":e!=="none","aria-sort":_(e),onClick:s,color:e==="none"?"default":"primary",size:"medium",children:r.jsx(a,{})})})},l={container:{py:4},box:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",gap:3,mb:5,px:2},typography:{flexBasis:"100%",textAlign:"center",color:"text.primary",fontWeight:600,mb:2,letterSpacing:"0.05em"},textField:{maxWidth:300,flexGrow:1,minWidth:220},listGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",listStyle:"none",padding:0,margin:0,"@media (max-width:1024px)":{gridTemplateColumns:"repeat(3, 1fr)"},"@media (max-width:768px)":{gridTemplateColumns:"repeat(2, 1fr)"},"@media (max-width:480px)":{gridTemplateColumns:"1fr"}}},u="character",Q="artist",w="/touhou-translations/",C=25,K=({mode:e,characters:s,artists:a})=>{const T=e===u?"Character List":"Artist List",A=e===u?"Search Characters":"Search Artists";if(e===u&&!s||e===Q&&!a)throw new Error(`${e} data prop is required`);const m=n.useMemo(()=>e===u?s:a,[e,s,a]),[x,L]=n.useState(""),[p,k]=n.useState(""),[i,v]=n.useState("none"),[y,I]=n.useState(C),b=n.useRef(null),h=n.useMemo(()=>p?m.filter(({id:t,name:o})=>[t,o].some(c=>c.toLowerCase().includes(p.toLowerCase()))):m,[m,p]),d=n.useMemo(()=>i==="none"?h:[...h].sort((t,o)=>i==="asc"?t.artworkCount-o.artworkCount:o.artworkCount-t.artworkCount),[h,i]),E=()=>{v(t=>t==="none"?"desc":t==="desc"?"asc":"none")},M=()=>d.slice(0,y).map(t=>{const o=t.id,c=t.name,g=`${t.artworkCount} artwork${t.artworkCount!==1?"s":""}`,$=`${w}${t.portrait}`,R=e===u?`${w}gallery?character=${o}`:`${w}gallery?artist=${o}`;return r.jsx(P,{name:c,imageUrl:$,description:g,link:R},o)});return n.useEffect(()=>{const t=setTimeout(()=>k(x),300);return()=>clearTimeout(t)},[x]),n.useEffect(()=>{const t=new IntersectionObserver(c=>{c[0].isIntersecting&&I(g=>Math.min(g+C,d.length))},{rootMargin:"100px"}),o=b.current;return o&&t.observe(o),()=>{o&&t.unobserve(o)}},[d]),n.useEffect(()=>{I(C)},[p,i]),r.jsxs(V,{maxWidth:"lg",sx:l.container,children:[r.jsxs(f,{sx:l.box,children:[r.jsx(B,{variant:"h4",component:"h2",sx:l.typography,children:T}),r.jsx(D,{label:"Search by ID or Name",variant:"outlined",value:x,sx:l.textField,onChange:t=>L(t.target.value),slotProps:{input:{"aria-label":A}}}),r.jsx(F,{sortOrder:i,onToggleSortOrder:E})]}),r.jsx(f,{component:"ul",sx:l.listGrid,children:M()}),y<d.length&&r.jsx(f,{ref:b,sx:{height:"1px"}})]})};export{K as L};
