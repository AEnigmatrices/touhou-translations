import{q as I,j as n,I as z,r as s,C as D,B as g,T as P}from"./chunk-B9SoNRqn.js";import{P as W}from"./chunk-AabAxUlm.js";import{T as G}from"./chunk-Cqa9pP2K.js";import{T as H}from"./chunk-DDwegYtC.js";const O=I(n.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"})),U=I(n.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"})),_=I(n.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),F={none:"none",asc:"ascending",desc:"descending"},L={asc:U,desc:_,none:O},q=r=>F[r],Q=({sortOrder:r,onToggleSortOrder:l})=>{const u=L[r]??L.none;return n.jsx(G,{title:"Sort by Artwork Count",arrow:!0,children:n.jsx(z,{"aria-label":"Sort by Artwork Count","aria-pressed":r!=="none","aria-sort":q(r),onClick:l,color:r==="none"?"default":"primary",size:"medium",children:n.jsx(u,{})})})},p={container:{px:{xs:0},py:4},box:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",gap:3,mb:5,px:2},typography:{flexBasis:"100%",textAlign:"center",color:"text.primary",fontWeight:600,mb:2,letterSpacing:"0.05em"},textField:{maxWidth:300,flexGrow:1,minWidth:220},listGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",listStyle:"none",padding:0,margin:0,"@media (max-width:1024px)":{gridTemplateColumns:"repeat(3, 1fr)"},"@media (max-width:768px)":{gridTemplateColumns:"repeat(2, 1fr)"},"@media (max-width:480px)":{gridTemplateColumns:"1fr"}}},a="character",w="artist",S="/touhou-translations/",y=25,X=({mode:r,characters:l,artists:u})=>{const k=r===a?"Character List":"Artist List",v=r===a?"Search Characters":"Search Artists";if(r===a&&!l||r===w&&!u)throw new Error(`${r} data prop is required`);const C=s.useMemo(()=>r===a?l:u,[r,l,u]),[f,$]=s.useState(""),[x,E]=s.useState(""),[c,M]=s.useState(r===w?"desc":"none"),[T,j]=s.useState(y),b=s.useRef(null),A=s.useMemo(()=>x?C.filter(({id:t,name:e})=>[t,e].some(o=>o.toLowerCase().includes(x.toLowerCase()))):C,[C,x]),d=s.useMemo(()=>{const t=(e,o)=>{if(c==="none")return r===w?e.id.localeCompare(o.id):0;const i=c==="asc"?e.artworkCount-o.artworkCount:o.artworkCount-e.artworkCount;if(i!==0)return i;const[h,m]=r===a?[e.artistCount,o.artistCount]:[e.characterCount,o.characterCount];return c==="asc"?h-m:m-h};return[...A].sort(t)},[A,c,r]),R=()=>{M(t=>t==="none"?"desc":t==="desc"?"asc":"none")},B=()=>d.slice(0,T).map(t=>{const e=t.id,o=t.name,i=`${t.artworkCount} artwork${t.artworkCount!==1?"s":""}`,h=r===a?`${t.artistCount} artist${t.artistCount!==1?"s":""}`:`${t.characterCount} character${t.characterCount!==1?"s":""}`,m=`${S}${t.portrait}`,V=r===a?`${S}gallery?character=${e}`:`${S}gallery?artist=${e}`;return n.jsx(W,{name:o,imageUrl:m,description1:i,description2:h,link:V},e)});return s.useEffect(()=>{const t=setTimeout(()=>E(f),300);return()=>clearTimeout(t)},[f]),s.useEffect(()=>{const t=new IntersectionObserver(o=>{o[0].isIntersecting&&j(i=>Math.min(i+y,d.length))},{rootMargin:"100px"}),e=b.current;return e&&t.observe(e),()=>{e&&t.unobserve(e)}},[d]),s.useEffect(()=>{j(y)},[x,c]),n.jsxs(D,{maxWidth:"xl",sx:p.container,children:[n.jsxs(g,{sx:p.box,children:[n.jsx(P,{variant:"h4",component:"h2",sx:p.typography,children:k}),n.jsx(H,{label:"Search by ID or Name",variant:"outlined",value:f,sx:p.textField,onChange:t=>$(t.target.value),slotProps:{input:{"aria-label":v}}}),n.jsx(Q,{sortOrder:c,onToggleSortOrder:R})]}),n.jsx(g,{component:"ul",sx:p.listGrid,children:B()}),T<d.length&&n.jsx(g,{ref:b,sx:{height:"1px"}})]})};export{X as L};
