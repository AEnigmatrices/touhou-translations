import{q as y,j as o,I as z,r as n,C as P,B as C,T as W}from"./chunk-BXpiIRfH.js";import{P as D}from"./chunk-C6QDhvYY.js";import{T as G}from"./chunk-LtNUIpbQ.js";import{T as H}from"./chunk-DCr8_LMt.js";const O=y(o.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"})),U=y(o.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"})),_=y(o.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),F={none:"none",asc:"ascending",desc:"descending"},j={asc:U,desc:_,none:O},q=e=>F[e],Q=({sortOrder:e,onToggleSortOrder:a})=>{const c=j[e]??j.none;return o.jsx(G,{title:"Sort by Artwork Count",arrow:!0,children:o.jsx(z,{"aria-label":"Sort by Artwork Count","aria-pressed":e!=="none","aria-sort":q(e),onClick:a,color:e==="none"?"default":"primary",size:"medium",children:o.jsx(c,{})})})},u={container:{px:{xs:0},py:4},box:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",gap:3,mb:5,px:2},typography:{flexBasis:"100%",textAlign:"center",color:"text.primary",fontWeight:600,mb:2,letterSpacing:"0.05em"},textField:{maxWidth:300,flexGrow:1,minWidth:220},listGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",listStyle:"none",padding:0,margin:0,"@media (max-width:1024px)":{gridTemplateColumns:"repeat(3, 1fr)"},"@media (max-width:768px)":{gridTemplateColumns:"repeat(2, 1fr)"},"@media (max-width:480px)":{gridTemplateColumns:"1fr"}}},s="character",f="artist",w="/touhou-translations/",S=25,X=({mode:e,characters:a,artists:c})=>{const A=e===s?"Character List":"Artist List",L=e===s?"Search Characters":"Search Artists";if(e===s&&!a||e===f&&!c)throw new Error(`${e} data prop is required`);const h=n.useMemo(()=>e===s?a:c,[e,a,c]),[m,k]=n.useState(""),[p,v]=n.useState(""),[i,$]=n.useState(e===f?"desc":"none"),[I,T]=n.useState(S),b=n.useRef(null),x=n.useMemo(()=>p?h.filter(({id:t,name:r})=>[t,r].some(l=>l.toLowerCase().includes(p.toLowerCase()))):h,[h,p]),d=n.useMemo(()=>i==="none"?e===f?[...x].sort((t,r)=>t.id.localeCompare(r.id)):x:[...x].sort((t,r)=>i==="asc"?t.artworkCount-r.artworkCount:r.artworkCount-t.artworkCount),[x,i,e]),E=()=>{$(t=>t==="none"?"desc":t==="desc"?"asc":"none")},M=()=>d.slice(0,I).map(t=>{const r=t.id,l=t.name,g=`${t.artworkCount} artwork${t.artworkCount!==1?"s":""}`,R=e===s?`${t.artistCount} artist${t.artistCount!==1?"s":""}`:`${t.characterCount} character${t.characterCount!==1?"s":""}`,B=`${w}${t.portrait}`,V=e===s?`${w}gallery?character=${r}`:`${w}gallery?artist=${r}`;return o.jsx(D,{name:l,imageUrl:B,description1:g,description2:R,link:V},r)});return n.useEffect(()=>{const t=setTimeout(()=>v(m),300);return()=>clearTimeout(t)},[m]),n.useEffect(()=>{const t=new IntersectionObserver(l=>{l[0].isIntersecting&&T(g=>Math.min(g+S,d.length))},{rootMargin:"100px"}),r=b.current;return r&&t.observe(r),()=>{r&&t.unobserve(r)}},[d]),n.useEffect(()=>{T(S)},[p,i]),o.jsxs(P,{maxWidth:"xl",sx:u.container,children:[o.jsxs(C,{sx:u.box,children:[o.jsx(W,{variant:"h4",component:"h2",sx:u.typography,children:A}),o.jsx(H,{label:"Search by ID or Name",variant:"outlined",value:m,sx:u.textField,onChange:t=>k(t.target.value),slotProps:{input:{"aria-label":L}}}),o.jsx(Q,{sortOrder:i,onToggleSortOrder:E})]}),o.jsx(C,{component:"ul",sx:u.listGrid,children:M()}),I<d.length&&o.jsx(C,{ref:b,sx:{height:"1px"}})]})};export{X as L};
