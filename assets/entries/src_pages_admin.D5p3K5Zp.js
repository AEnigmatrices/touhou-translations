import{R as $,a as pt,r as oe,b as Ot,j as m,B as W,S as se,T as ee,c as Wt,P as Mt,i as Nt}from"../chunks/chunk-CpRRab1X.js";import{A as tt,a as rt,E as st,b as it}from"../chunks/chunk-DL7ufo_y.js";import{T as J}from"../chunks/chunk-B8NNAFbF.js";import{B as Ce}from"../chunks/chunk-BjUO3H1S.js";import"../chunks/chunk-CTgH_dsO.js";/* empty css                      */import"../chunks/chunk-DWk6lnTA.js";import"../chunks/chunk-D6tTryut.js";import"../chunks/chunk-BfQRWAfm.js";var we=e=>e.type==="checkbox",de=e=>e instanceof Date,M=e=>e==null;const wt=e=>typeof e=="object";var T=e=>!M(e)&&!Array.isArray(e)&&wt(e)&&!de(e),qt=e=>T(e)&&e.target?we(e.target)?e.target.checked:e.target.value:e,$t=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,zt=(e,t)=>e.has($t(t)),Ht=e=>{const t=e.constructor&&e.constructor.prototype;return T(t)&&t.hasOwnProperty("isPrototypeOf")},We=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function U(e){let t;const s=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(We&&(e instanceof Blob||i))&&(s||T(e)))if(t=s?[]:Object.create(Object.getPrototypeOf(e)),!s&&!Ht(e))t=e;else for(const o in e)e.hasOwnProperty(o)&&(t[o]=U(e[o]));else return e;return t}var Ee=e=>/^\w*$/.test(e),R=e=>e===void 0,Me=e=>Array.isArray(e)?e.filter(Boolean):[],Ne=e=>Me(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,t,s)=>{if(!t||!T(e))return s;const i=(Ee(t)?[t]:Ne(t)).reduce((o,n)=>M(o)?o:o[n],e);return R(i)||i===e?R(e[t])?s:e[t]:i},G=e=>typeof e=="boolean",D=(e,t,s)=>{let i=-1;const o=Ee(t)?[t]:Ne(t),n=o.length,u=n-1;for(;++i<n;){const f=o[i];let b=s;if(i!==u){const B=e[f];b=T(B)||Array.isArray(B)?B:isNaN(+o[i+1])?{}:[]}if(f==="__proto__"||f==="constructor"||f==="prototype")return;e[f]=b,e=e[f]}};const at={BLUR:"blur",FOCUS_OUT:"focusout"},K={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},re={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Jt=$.createContext(null);Jt.displayName="HookFormContext";var Kt=(e,t,s,i=!0)=>{const o={defaultValues:t._defaultValues};for(const n in e)Object.defineProperty(o,n,{get:()=>{const u=n;return t._proxyFormState[u]!==K.all&&(t._proxyFormState[u]=!i||K.all),e[u]}});return o};const Xt=typeof window<"u"?$.useLayoutEffect:$.useEffect;var te=e=>typeof e=="string",Yt=(e,t,s,i,o)=>te(e)?(i&&t.watch.add(e),y(s,e,o)):Array.isArray(e)?e.map(n=>(i&&t.watch.add(n),y(s,n))):(i&&(t.watchAll=!0),s),Oe=e=>M(e)||!wt(e);function ne(e,t,s=new WeakSet){if(Oe(e)||Oe(t))return e===t;if(de(e)&&de(t))return e.getTime()===t.getTime();const i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;if(s.has(e)||s.has(t))return!0;s.add(e),s.add(t);for(const n of i){const u=e[n];if(!o.includes(n))return!1;if(n!=="ref"){const f=t[n];if(de(u)&&de(f)||T(u)&&T(f)||Array.isArray(u)&&Array.isArray(f)?!ne(u,f,s):u!==f)return!1}}return!0}var Qt=(e,t,s,i,o)=>t?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[i]:o||!0}}:{},be=e=>Array.isArray(e)?e:[e],nt=()=>{let e=[];return{get observers(){return e},next:o=>{for(const n of e)n.next&&n.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(n=>n!==o)}}),unsubscribe:()=>{e=[]}}},q=e=>T(e)&&!Object.keys(e).length,qe=e=>e.type==="file",X=e=>typeof e=="function",De=e=>{if(!We)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},At=e=>e.type==="select-multiple",$e=e=>e.type==="radio",Zt=e=>$e(e)||we(e),Ie=e=>De(e)&&e.isConnected;function Gt(e,t){const s=t.slice(0,-1).length;let i=0;for(;i<s;)e=R(e)?i++:e[t[i++]];return e}function er(e){for(const t in e)if(e.hasOwnProperty(t)&&!R(e[t]))return!1;return!0}function E(e,t){const s=Array.isArray(t)?t:Ee(t)?[t]:Ne(t),i=s.length===1?e:Gt(e,s),o=s.length-1,n=s[o];return i&&delete i[n],o!==0&&(T(i)&&q(i)||Array.isArray(i)&&er(i))&&E(e,s.slice(0,-1)),e}var _t=e=>{for(const t in e)if(X(e[t]))return!0;return!1};function ke(e,t={}){const s=Array.isArray(e);if(T(e)||s)for(const i in e)Array.isArray(e[i])||T(e[i])&&!_t(e[i])?(t[i]=Array.isArray(e[i])?[]:{},ke(e[i],t[i])):M(e[i])||(t[i]=!0);return t}function Vt(e,t,s){const i=Array.isArray(e);if(T(e)||i)for(const o in e)Array.isArray(e[o])||T(e[o])&&!_t(e[o])?R(t)||Oe(s[o])?s[o]=Array.isArray(e[o])?ke(e[o],[]):{...ke(e[o])}:Vt(e[o],M(t)?{}:t[o],s[o]):s[o]=!ne(e[o],t[o]);return s}var xe=(e,t)=>Vt(e,t,ke(t));const lt={value:!1,isValid:!1},ot={value:!0,isValid:!0};var Ft=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!R(e[0].attributes.value)?R(e[0].value)||e[0].value===""?ot:{value:e[0].value,isValid:!0}:ot:lt}return lt},Dt=(e,{valueAsNumber:t,valueAsDate:s,setValueAs:i})=>R(e)?e:t?e===""?NaN:e&&+e:s&&te(e)?new Date(e):i?i(e):e;const dt={isValid:!1,value:null};var kt=e=>Array.isArray(e)?e.reduce((t,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:t,dt):dt;function ut(e){const t=e.ref;return qe(t)?t.files:$e(t)?kt(e.refs).value:At(t)?[...t.selectedOptions].map(({value:s})=>s):we(t)?Ft(e.refs).value:Dt(R(t.value)?e.ref.value:t.value,e)}var tr=(e,t,s,i)=>{const o={};for(const n of e){const u=y(t,n);u&&D(o,n,u._f)}return{criteriaMode:s,names:[...e],fields:o,shouldUseNativeValidation:i}},Se=e=>e instanceof RegExp,ge=e=>R(e)?e:Se(e)?e.source:T(e)?Se(e.value)?e.value.source:e.value:e,ct=e=>({isOnSubmit:!e||e===K.onSubmit,isOnBlur:e===K.onBlur,isOnChange:e===K.onChange,isOnAll:e===K.all,isOnTouch:e===K.onTouched});const ft="AsyncFunction";var rr=e=>!!e&&!!e.validate&&!!(X(e.validate)&&e.validate.constructor.name===ft||T(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===ft)),sr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),ht=(e,t,s)=>!s&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const pe=(e,t,s,i)=>{for(const o of s||Object.keys(e)){const n=y(e,o);if(n){const{_f:u,...f}=n;if(u){if(u.refs&&u.refs[0]&&t(u.refs[0],o)&&!i)return!0;if(u.ref&&t(u.ref,u.name)&&!i)return!0;if(pe(f,t))break}else if(T(f)&&pe(f,t))break}}};function yt(e,t,s){const i=y(e,s);if(i||Ee(s))return{error:i,name:s};const o=s.split(".");for(;o.length;){const n=o.join("."),u=y(t,n),f=y(e,n);if(u&&!Array.isArray(u)&&s!==n)return{name:s};if(f&&f.type)return{name:n,error:f};if(f&&f.root&&f.root.type)return{name:`${n}.root`,error:f.root};o.pop()}return{name:s}}var ir=(e,t,s,i)=>{s(e);const{name:o,...n}=e;return q(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(u=>t[u]===(!i||K.all))},ar=(e,t,s)=>!e||!t||e===t||be(e).some(i=>i&&(s?i===t:i.startsWith(t)||t.startsWith(i))),nr=(e,t,s,i,o)=>o.isOnAll?!1:!s&&o.isOnTouch?!(t||e):(s?i.isOnBlur:o.isOnBlur)?!e:(s?i.isOnChange:o.isOnChange)?e:!0,lr=(e,t)=>!Me(y(e,t)).length&&E(e,t),or=(e,t,s)=>{const i=be(y(e,s));return D(i,"root",t[s]),D(e,s,i),e},Fe=e=>te(e);function mt(e,t,s="validate"){if(Fe(e)||Array.isArray(e)&&e.every(Fe)||G(e)&&!e)return{type:s,message:Fe(e)?e:"",ref:t}}var ce=e=>T(e)&&!Se(e)?e:{value:e,message:""},xt=async(e,t,s,i,o,n)=>{const{ref:u,refs:f,required:b,maxLength:B,minLength:w,min:F,max:g,pattern:I,validate:C,name:k,valueAsNumber:Y,mount:ye}=e._f,v=y(s,k);if(!ye||t.has(k))return{};const P=f?f[0]:u,L=p=>{o&&P.reportValidity&&(P.setCustomValidity(G(p)?"":p||""),P.reportValidity())},j={},Ae=$e(u),ie=we(u),Re=Ae||ie,H=(Y||qe(u))&&R(u.value)&&R(v)||De(u)&&u.value===""||v===""||Array.isArray(v)&&!v.length,le=Qt.bind(null,k,i,j),Q=(p,_,S,O=re.maxLength,N=re.minLength)=>{const Z=p?_:S;j[k]={type:p?O:N,message:Z,ref:u,...le(p?O:N,Z)}};if(n?!Array.isArray(v)||!v.length:b&&(!Re&&(H||M(v))||G(v)&&!v||ie&&!Ft(f).isValid||Ae&&!kt(f).isValid)){const{value:p,message:_}=Fe(b)?{value:!!b,message:b}:ce(b);if(p&&(j[k]={type:re.required,message:_,ref:P,...le(re.required,_)},!i))return L(_),j}if(!H&&(!M(F)||!M(g))){let p,_;const S=ce(g),O=ce(F);if(!M(v)&&!isNaN(v)){const N=u.valueAsNumber||v&&+v;M(S.value)||(p=N>S.value),M(O.value)||(_=N<O.value)}else{const N=u.valueAsDate||new Date(v),Z=_e=>new Date(new Date().toDateString()+" "+_e),me=u.type=="time",ue=u.type=="week";te(S.value)&&v&&(p=me?Z(v)>Z(S.value):ue?v>S.value:N>new Date(S.value)),te(O.value)&&v&&(_=me?Z(v)<Z(O.value):ue?v<O.value:N<new Date(O.value))}if((p||_)&&(Q(!!p,S.message,O.message,re.max,re.min),!i))return L(j[k].message),j}if((B||w)&&!H&&(te(v)||n&&Array.isArray(v))){const p=ce(B),_=ce(w),S=!M(p.value)&&v.length>+p.value,O=!M(_.value)&&v.length<+_.value;if((S||O)&&(Q(S,p.message,_.message),!i))return L(j[k].message),j}if(I&&!H&&te(v)){const{value:p,message:_}=ce(I);if(Se(p)&&!v.match(p)&&(j[k]={type:re.pattern,message:_,ref:u,...le(re.pattern,_)},!i))return L(_),j}if(C){if(X(C)){const p=await C(v,s),_=mt(p,P);if(_&&(j[k]={..._,...le(re.validate,_.message)},!i))return L(_.message),j}else if(T(C)){let p={};for(const _ in C){if(!q(p)&&!i)break;const S=mt(await C[_](v,s),P,_);S&&(p={...S,...le(_,S.message)},L(S.message),i&&(j[k]=p))}if(!q(p)&&(j[k]={ref:P,...p},!i))return j}}return L(!0),j};const dr={mode:K.onSubmit,reValidateMode:K.onChange,shouldFocusError:!0};function ur(e={}){let t={...dr,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:X(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},o=T(t.defaultValues)||T(t.values)?U(t.defaultValues||t.values)||{}:{},n=t.shouldUnregister?{}:U(o),u={action:!1,mount:!1,watch:!1},f={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},b,B=0;const w={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let F={...w};const g={array:nt(),state:nt()},I=t.criteriaMode===K.all,C=r=>a=>{clearTimeout(B),B=setTimeout(r,a)},k=async r=>{if(!t.disabled&&(w.isValid||F.isValid||r)){const a=t.resolver?q((await ie()).errors):await H(i,!0);a!==s.isValid&&g.state.next({isValid:a})}},Y=(r,a)=>{!t.disabled&&(w.isValidating||w.validatingFields||F.isValidating||F.validatingFields)&&((r||Array.from(f.mount)).forEach(l=>{l&&(a?D(s.validatingFields,l,a):E(s.validatingFields,l))}),g.state.next({validatingFields:s.validatingFields,isValidating:!q(s.validatingFields)}))},ye=(r,a=[],l,h,c=!0,d=!0)=>{if(h&&l&&!t.disabled){if(u.action=!0,d&&Array.isArray(y(i,r))){const x=l(y(i,r),h.argA,h.argB);c&&D(i,r,x)}if(d&&Array.isArray(y(s.errors,r))){const x=l(y(s.errors,r),h.argA,h.argB);c&&D(s.errors,r,x),lr(s.errors,r)}if((w.touchedFields||F.touchedFields)&&d&&Array.isArray(y(s.touchedFields,r))){const x=l(y(s.touchedFields,r),h.argA,h.argB);c&&D(s.touchedFields,r,x)}(w.dirtyFields||F.dirtyFields)&&(s.dirtyFields=xe(o,n)),g.state.next({name:r,isDirty:Q(r,a),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else D(n,r,a)},v=(r,a)=>{D(s.errors,r,a),g.state.next({errors:s.errors})},P=r=>{s.errors=r,g.state.next({errors:s.errors,isValid:!1})},L=(r,a,l,h)=>{const c=y(i,r);if(c){const d=y(n,r,R(l)?y(o,r):l);R(d)||h&&h.defaultChecked||a?D(n,r,a?d:ut(c._f)):S(r,d),u.mount&&k()}},j=(r,a,l,h,c)=>{let d=!1,x=!1;const A={name:r};if(!t.disabled){if(!l||h){(w.isDirty||F.isDirty)&&(x=s.isDirty,s.isDirty=A.isDirty=Q(),d=x!==A.isDirty);const V=ne(y(o,r),a);x=!!y(s.dirtyFields,r),V?E(s.dirtyFields,r):D(s.dirtyFields,r,!0),A.dirtyFields=s.dirtyFields,d=d||(w.dirtyFields||F.dirtyFields)&&x!==!V}if(l){const V=y(s.touchedFields,r);V||(D(s.touchedFields,r,l),A.touchedFields=s.touchedFields,d=d||(w.touchedFields||F.touchedFields)&&V!==l)}d&&c&&g.state.next(A)}return d?A:{}},Ae=(r,a,l,h)=>{const c=y(s.errors,r),d=(w.isValid||F.isValid)&&G(a)&&s.isValid!==a;if(t.delayError&&l?(b=C(()=>v(r,l)),b(t.delayError)):(clearTimeout(B),b=null,l?D(s.errors,r,l):E(s.errors,r)),(l?!ne(c,l):c)||!q(h)||d){const x={...h,...d&&G(a)?{isValid:a}:{},errors:s.errors,name:r};s={...s,...x},g.state.next(x)}},ie=async r=>{Y(r,!0);const a=await t.resolver(n,t.context,tr(r||f.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return Y(r),a},Re=async r=>{const{errors:a}=await ie(r);if(r)for(const l of r){const h=y(a,l);h?D(s.errors,l,h):E(s.errors,l)}else s.errors=a;return a},H=async(r,a,l={valid:!0})=>{for(const h in r){const c=r[h];if(c){const{_f:d,...x}=c;if(d){const A=f.array.has(d.name),V=c._f&&rr(c._f);V&&w.validatingFields&&Y([h],!0);const z=await xt(c,f.disabled,n,I,t.shouldUseNativeValidation&&!a,A);if(V&&w.validatingFields&&Y([h]),z[d.name]&&(l.valid=!1,a))break;!a&&(y(z,d.name)?A?or(s.errors,z,d.name):D(s.errors,d.name,z[d.name]):E(s.errors,d.name))}!q(x)&&await H(x,a,l)}}return l.valid},le=()=>{for(const r of f.unMount){const a=y(i,r);a&&(a._f.refs?a._f.refs.every(l=>!Ie(l)):!Ie(a._f.ref))&&je(r)}f.unMount=new Set},Q=(r,a)=>!t.disabled&&(r&&a&&D(n,r,a),!ne(_e(),o)),p=(r,a,l)=>Yt(r,f,{...u.mount?n:R(a)?o:te(r)?{[r]:a}:a},l,a),_=r=>Me(y(u.mount?n:o,r,t.shouldUnregister?y(o,r,[]):[])),S=(r,a,l={})=>{const h=y(i,r);let c=a;if(h){const d=h._f;d&&(!d.disabled&&D(n,r,Dt(a,d)),c=De(d.ref)&&M(a)?"":a,At(d.ref)?[...d.ref.options].forEach(x=>x.selected=c.includes(x.value)):d.refs?we(d.ref)?d.refs.forEach(x=>{(!x.defaultChecked||!x.disabled)&&(Array.isArray(c)?x.checked=!!c.find(A=>A===x.value):x.checked=c===x.value||!!c)}):d.refs.forEach(x=>x.checked=x.value===c):qe(d.ref)?d.ref.value="":(d.ref.value=c,d.ref.type||g.state.next({name:r,values:U(n)})))}(l.shouldDirty||l.shouldTouch)&&j(r,c,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&ue(r)},O=(r,a,l)=>{for(const h in a){if(!a.hasOwnProperty(h))return;const c=a[h],d=r+"."+h,x=y(i,d);(f.array.has(r)||T(c)||x&&!x._f)&&!de(c)?O(d,c,l):S(d,c,l)}},N=(r,a,l={})=>{const h=y(i,r),c=f.array.has(r),d=U(a);D(n,r,d),c?(g.array.next({name:r,values:U(n)}),(w.isDirty||w.dirtyFields||F.isDirty||F.dirtyFields)&&l.shouldDirty&&g.state.next({name:r,dirtyFields:xe(o,n),isDirty:Q(r,d)})):h&&!h._f&&!M(d)?O(r,d,l):S(r,d,l),ht(r,f)&&g.state.next({...s,name:r}),g.state.next({name:u.mount?r:void 0,values:U(n)})},Z=async r=>{u.mount=!0;const a=r.target;let l=a.name,h=!0;const c=y(i,l),d=V=>{h=Number.isNaN(V)||de(V)&&isNaN(V.getTime())||ne(V,y(n,l,V))},x=ct(t.mode),A=ct(t.reValidateMode);if(c){let V,z;const Ve=a.type?ut(c._f):qt(r),ae=r.type===at.BLUR||r.type===at.FOCUS_OUT,Bt=!sr(c._f)&&!t.resolver&&!y(s.errors,l)&&!c._f.deps||nr(ae,y(s.touchedFields,l),s.isSubmitted,A,x),Ue=ht(l,f,ae);D(n,l,Ve),ae?(!a||!a.readOnly)&&(c._f.onBlur&&c._f.onBlur(r),b&&b(0)):c._f.onChange&&c._f.onChange(r);const Be=j(l,Ve,ae),It=!q(Be)||Ue;if(!ae&&g.state.next({name:l,type:r.type,values:U(n)}),Bt)return(w.isValid||F.isValid)&&(t.mode==="onBlur"?ae&&k():ae||k()),It&&g.state.next({name:l,...Ue?{}:Be});if(!ae&&Ue&&g.state.next({...s}),t.resolver){const{errors:Ge}=await ie([l]);if(d(Ve),h){const Ct=yt(s.errors,i,l),et=yt(Ge,i,Ct.name||l);V=et.error,l=et.name,z=q(Ge)}}else Y([l],!0),V=(await xt(c,f.disabled,n,I,t.shouldUseNativeValidation))[l],Y([l]),d(Ve),h&&(V?z=!1:(w.isValid||F.isValid)&&(z=await H(i,!0)));h&&(c._f.deps&&ue(c._f.deps),Ae(l,z,V,Be))}},me=(r,a)=>{if(y(s.errors,a)&&r.focus)return r.focus(),1},ue=async(r,a={})=>{let l,h;const c=be(r);if(t.resolver){const d=await Re(R(r)?r:c);l=q(d),h=r?!c.some(x=>y(d,x)):l}else r?(h=(await Promise.all(c.map(async d=>{const x=y(i,d);return await H(x&&x._f?{[d]:x}:x)}))).every(Boolean),!(!h&&!s.isValid)&&k()):h=l=await H(i);return g.state.next({...!te(r)||(w.isValid||F.isValid)&&l!==s.isValid?{}:{name:r},...t.resolver||!r?{isValid:l}:{},errors:s.errors}),a.shouldFocus&&!h&&pe(i,me,r?c:f.mount),h},_e=r=>{const a={...u.mount?n:o};return R(r)?a:te(r)?y(a,r):r.map(l=>y(a,l))},ze=(r,a)=>({invalid:!!y((a||s).errors,r),isDirty:!!y((a||s).dirtyFields,r),error:y((a||s).errors,r),isValidating:!!y(s.validatingFields,r),isTouched:!!y((a||s).touchedFields,r)}),Tt=r=>{r&&be(r).forEach(a=>E(s.errors,a)),g.state.next({errors:r?s.errors:{}})},He=(r,a,l)=>{const h=(y(i,r,{_f:{}})._f||{}).ref,c=y(s.errors,r)||{},{ref:d,message:x,type:A,...V}=c;D(s.errors,r,{...V,...a,ref:h}),g.state.next({name:r,errors:s.errors,isValid:!1}),l&&l.shouldFocus&&h&&h.focus&&h.focus()},Et=(r,a)=>X(r)?g.state.subscribe({next:l=>"values"in l&&r(p(void 0,a),l)}):p(r,a,!0),Je=r=>g.state.subscribe({next:a=>{ar(r.name,a.name,r.exact)&&ir(a,r.formState||w,Ut,r.reRenderRoot)&&r.callback({values:{...n},...s,...a,defaultValues:o})}}).unsubscribe,Rt=r=>(u.mount=!0,F={...F,...r.formState},Je({...r,formState:F})),je=(r,a={})=>{for(const l of r?be(r):f.mount)f.mount.delete(l),f.array.delete(l),a.keepValue||(E(i,l),E(n,l)),!a.keepError&&E(s.errors,l),!a.keepDirty&&E(s.dirtyFields,l),!a.keepTouched&&E(s.touchedFields,l),!a.keepIsValidating&&E(s.validatingFields,l),!t.shouldUnregister&&!a.keepDefaultValue&&E(o,l);g.state.next({values:U(n)}),g.state.next({...s,...a.keepDirty?{isDirty:Q()}:{}}),!a.keepIsValid&&k()},Ke=({disabled:r,name:a})=>{(G(r)&&u.mount||r||f.disabled.has(a))&&(r?f.disabled.add(a):f.disabled.delete(a))},Pe=(r,a={})=>{let l=y(i,r);const h=G(a.disabled)||G(t.disabled);return D(i,r,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:r}},name:r,mount:!0,...a}}),f.mount.add(r),l?Ke({disabled:G(a.disabled)?a.disabled:t.disabled,name:r}):L(r,!0,a.value),{...h?{disabled:a.disabled||t.disabled}:{},...t.progressive?{required:!!a.required,min:ge(a.min),max:ge(a.max),minLength:ge(a.minLength),maxLength:ge(a.maxLength),pattern:ge(a.pattern)}:{},name:r,onChange:Z,onBlur:Z,ref:c=>{if(c){Pe(r,a),l=y(i,r);const d=R(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,x=Zt(d),A=l._f.refs||[];if(x?A.find(V=>V===d):d===l._f.ref)return;D(i,r,{_f:{...l._f,...x?{refs:[...A.filter(Ie),d,...Array.isArray(y(o,r))?[{}]:[]],ref:{type:d.type,name:r}}:{ref:d}}}),L(r,!1,void 0,d)}else l=y(i,r,{}),l._f&&(l._f.mount=!1),(t.shouldUnregister||a.shouldUnregister)&&!(zt(f.array,r)&&u.action)&&f.unMount.add(r)}}},Le=()=>t.shouldFocusError&&pe(i,me,f.mount),jt=r=>{G(r)&&(g.state.next({disabled:r}),pe(i,(a,l)=>{const h=y(i,l);h&&(a.disabled=h._f.disabled||r,Array.isArray(h._f.refs)&&h._f.refs.forEach(c=>{c.disabled=h._f.disabled||r}))},0,!1))},Xe=(r,a)=>async l=>{let h;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let c=U(n);if(g.state.next({isSubmitting:!0}),t.resolver){const{errors:d,values:x}=await ie();s.errors=d,c=U(x)}else await H(i);if(f.disabled.size)for(const d of f.disabled)E(c,d);if(E(s.errors,"root"),q(s.errors)){g.state.next({errors:{}});try{await r(c,l)}catch(d){h=d}}else a&&await a({...s.errors},l),Le(),setTimeout(Le);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:q(s.errors)&&!h,submitCount:s.submitCount+1,errors:s.errors}),h)throw h},Pt=(r,a={})=>{y(i,r)&&(R(a.defaultValue)?N(r,U(y(o,r))):(N(r,a.defaultValue),D(o,r,U(a.defaultValue))),a.keepTouched||E(s.touchedFields,r),a.keepDirty||(E(s.dirtyFields,r),s.isDirty=a.defaultValue?Q(r,U(y(o,r))):Q()),a.keepError||(E(s.errors,r),w.isValid&&k()),g.state.next({...s}))},Ye=(r,a={})=>{const l=r?U(r):o,h=U(l),c=q(r),d=c?o:h;if(a.keepDefaultValues||(o=l),!a.keepValues){if(a.keepDirtyValues){const x=new Set([...f.mount,...Object.keys(xe(o,n))]);for(const A of Array.from(x))y(s.dirtyFields,A)?D(d,A,y(n,A)):N(A,y(d,A))}else{if(We&&R(r))for(const x of f.mount){const A=y(i,x);if(A&&A._f){const V=Array.isArray(A._f.refs)?A._f.refs[0]:A._f.ref;if(De(V)){const z=V.closest("form");if(z){z.reset();break}}}}if(a.keepFieldsRef)for(const x of f.mount)N(x,y(d,x));else i={}}n=t.shouldUnregister?a.keepDefaultValues?U(o):{}:U(d),g.array.next({values:{...d}}),g.state.next({values:{...d}})}f={mount:a.keepDirtyValues?f.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!w.isValid||!!a.keepIsValid||!!a.keepDirtyValues,u.watch=!!t.shouldUnregister,g.state.next({submitCount:a.keepSubmitCount?s.submitCount:0,isDirty:c?!1:a.keepDirty?s.isDirty:!!(a.keepDefaultValues&&!ne(r,o)),isSubmitted:a.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:c?{}:a.keepDirtyValues?a.keepDefaultValues&&n?xe(o,n):s.dirtyFields:a.keepDefaultValues&&r?xe(o,r):a.keepDirty?s.dirtyFields:{},touchedFields:a.keepTouched?s.touchedFields:{},errors:a.keepErrors?s.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},Qe=(r,a)=>Ye(X(r)?r(n):r,a),Lt=(r,a={})=>{const l=y(i,r),h=l&&l._f;if(h){const c=h.refs?h.refs[0]:h.ref;c.focus&&(c.focus(),a.shouldSelect&&X(c.select)&&c.select())}},Ut=r=>{s={...s,...r}},Ze={control:{register:Pe,unregister:je,getFieldState:ze,handleSubmit:Xe,setError:He,_subscribe:Je,_runSchema:ie,_focusError:Le,_getWatch:p,_getDirty:Q,_setValid:k,_setFieldArray:ye,_setDisabledField:Ke,_setErrors:P,_getFieldArray:_,_reset:Ye,_resetDefaultValues:()=>X(t.defaultValues)&&t.defaultValues().then(r=>{Qe(r,t.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:le,_disableForm:jt,_subjects:g,_proxyFormState:w,get _fields(){return i},get _formValues(){return n},get _state(){return u},set _state(r){u=r},get _defaultValues(){return o},get _names(){return f},set _names(r){f=r},get _formState(){return s},get _options(){return t},set _options(r){t={...t,...r}}},subscribe:Rt,trigger:ue,register:Pe,handleSubmit:Xe,watch:Et,setValue:N,getValues:_e,reset:Qe,resetField:Pt,clearErrors:Tt,unregister:je,setError:He,setFocus:Lt,getFieldState:ze};return{...Ze,formControl:Ze}}function St(e={}){const t=$.useRef(void 0),s=$.useRef(void 0),[i,o]=$.useState({isDirty:!1,isValidating:!1,isLoading:X(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:X(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:i},e.defaultValues&&!X(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...f}=ur(e);t.current={...f,formState:i}}const n=t.current.control;return n._options=e,Xt(()=>{const u=n._subscribe({formState:n._proxyFormState,callback:()=>o({...n._formState}),reRenderRoot:!0});return o(f=>({...f,isReady:!0})),n._formState.isReady=!0,u},[n]),$.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),$.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),$.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),$.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),$.useEffect(()=>{if(n._proxyFormState.isDirty){const u=n._getDirty();u!==i.isDirty&&n._subjects.state.next({isDirty:u})}},[n,i.isDirty]),$.useEffect(()=>{e.values&&!ne(e.values,s.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),s.current=e.values,o(u=>({...u}))):n._resetDefaultValues()},[n,e.values]),$.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),t.current.formState=Kt(i,n),t.current}const cr={"Content-Type":"application/json"},gt=e=>e.split(",").map(t=>t.trim()).filter(Boolean),fr=e=>e.endsWith(".json")?e:`${e}.json`,hr=e=>{if(e.media_metadata){const t=e.media_metadata;return Object.entries(t).map(([s,i])=>{const o=i.m?.includes("png")?"png":"jpg";return`https://i.redd.it/${s}.${o}`}).reverse()}return e.url?[e.url]:[]},yr=({date:e,reddit:t,urls:s,src:i,desc:o,artistId:n,characterIds:u})=>({date:e,reddit:Te(t),url:gt(s),src:i,desc:o,artistId:n,characterIds:gt(u)}),mr=async e=>{const t=await fetch("/api/posts",{method:"POST",headers:cr,body:JSON.stringify(yr(e))}),s=await t.json();if(!t.ok)throw new Error(s.error||"Failed to add post")},xr=e=>{const t=e.trim();return pt.some(i=>i.id===t)||"Artist ID does not exist."},Te=e=>{if(!e)return"";try{const t=new URL(e);t.hostname==="old.reddit.com"&&(t.hostname="www.reddit.com");const{origin:s,pathname:i}=t,o=i.split("/").filter(Boolean);return o.length>=4&&o[0]==="r"&&o[2]==="comments"?`${s}/${o.slice(0,4).join("/")}`:""}catch{return""}},gr=async e=>{if(!e)return null;try{const t=await fetch(fr(e));if(!t.ok)throw new Error("Failed to fetch Reddit data");const i=(await t.json())[0]?.data?.children[0]?.data;if(!i)throw new Error("Invalid Reddit data structure");const o=i.created_utc?i.created_utc*1e3:null,n=i.selftext??"",u=hr(i);return{createdDate:o,description:n,imageUrls:u}}catch(t){return console.error("Error fetching Reddit data:",t),null}},vt=(e,t)=>{const s=Te(e.trim());return t?.some(o=>Te(o.reddit)===s)?"This Reddit URL already exists.":!0},fe={containerBox:{maxWidth:900,mx:"auto",p:3},inputBoxSmall:{flex:"1 1 220px",minWidth:220},actionButton:{minWidth:150}},vr=()=>{const{register:e,handleSubmit:t,reset:s,watch:i,setValue:o,getValues:n,setError:u,clearErrors:f,formState:{errors:b,isSubmitting:B}}=St(),[w,F]=oe.useState(!1),{posts:g}=Ot(),I=oe.useRef(null),C=i("reddit"),k=oe.useCallback(v=>{I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{const P=vt(v.trim(),g);P!==!0?u("reddit",{type:"validate",message:P}):f("reddit")},500)},[u,f,g]),Y=async v=>{try{await mr(v),alert("Post added successfully!"),s()}catch(P){alert(`Error: ${P instanceof Error?P.message:"Unknown error"}`)}},ye=async()=>{const v=n("reddit");if(!v){alert("Please enter a Reddit URL first.");return}const P=vt(v,g);if(P!==!0){alert(P);return}F(!0);try{const L=await gr(Te(v));if(!L){alert("Failed to load Reddit data");return}L.createdDate&&o("date",L.createdDate,{shouldValidate:!0}),L.description&&o("desc",L.description,{shouldValidate:!0}),L.imageUrls?.length&&o("urls",L.imageUrls.join(", "),{shouldValidate:!0})}finally{F(!1)}};return oe.useEffect(()=>{if(!C){f("reddit");return}k(C)},[C,k,f]),m.jsx(W,{sx:fe.containerBox,children:m.jsx("form",{onSubmit:t(Y),noValidate:!0,children:m.jsxs(se,{spacing:4,children:[m.jsxs(W,{children:[m.jsx(ee,{variant:"h6",gutterBottom:!0,children:"Post Details"}),m.jsxs(se,{direction:"row",spacing:2,flexWrap:"wrap",children:[m.jsx(W,{sx:fe.inputBoxSmall,children:m.jsx(J,{label:"UNIX Timestamp",type:"number",error:!!b.date,helperText:b.date?.message,fullWidth:!0,...e("date",{required:"Date is required",valueAsNumber:!0}),slotProps:{inputLabel:{shrink:!!i("date")}}})}),m.jsx(W,{sx:fe.inputBoxSmall,children:m.jsx(J,{label:"Artist ID",error:!!b.artistId,helperText:b.artistId?.message,fullWidth:!0,...e("artistId",{required:"Artist ID is required",validate:xr}),slotProps:{inputLabel:{shrink:!!i("artistId")}}})}),m.jsx(W,{sx:fe.inputBoxSmall,children:m.jsx(J,{label:"Source URL",error:!!b.src,helperText:b.src?.message,fullWidth:!0,...e("src",{required:"Source URL is required"}),slotProps:{inputLabel:{shrink:!!i("src")}}})})]})]}),m.jsxs(W,{children:[m.jsx(ee,{variant:"h6",gutterBottom:!0,children:"URLs"}),m.jsxs(se,{spacing:2,children:[m.jsx(J,{label:"Image URLs (comma separated)",error:!!b.urls,helperText:b.urls?.message,fullWidth:!0,...e("urls",{required:"Image URLs are required"}),slotProps:{inputLabel:{shrink:!!i("urls")}}}),m.jsx(J,{label:"Character IDs (comma separated)",error:!!b.characterIds,helperText:b.characterIds?.message,fullWidth:!0,...e("characterIds",{required:"Character IDs are required"}),slotProps:{inputLabel:{shrink:!!i("characterIds")}}})]})]}),m.jsxs(W,{children:[m.jsx(ee,{variant:"h6",gutterBottom:!0,children:"Description"}),m.jsx(J,{label:"Description",error:!!b.desc,helperText:b.desc?.message,multiline:!0,minRows:6,fullWidth:!0,...e("desc",{required:"Description is required"}),slotProps:{inputLabel:{shrink:!!i("desc")}}})]}),m.jsxs(W,{children:[m.jsx(ee,{variant:"h6",gutterBottom:!0,children:"Reddit URL"}),m.jsx(J,{label:"Reddit URL",error:!!b.reddit,helperText:b.reddit?.message,fullWidth:!0,...e("reddit",{required:"Reddit URL is required"}),slotProps:{inputLabel:{shrink:!!i("reddit")}}})]}),m.jsxs(se,{direction:"row",spacing:2,justifyContent:"center",flexWrap:"wrap",children:[m.jsx(Ce,{variant:"contained",onClick:ye,disabled:w,sx:fe.actionButton,children:w?"Loading...":"Fetch from Reddit"}),m.jsx(Ce,{type:"submit",variant:"contained",disabled:B,sx:fe.actionButton,children:B?"Submitting...":"Add Post"})]})]})})})},bt=["demoman.webp","engineer.webp","heavy.webp","medic.webp","pyro.webp","scout.webp","sniper.webp","soldier.webp","spy.webp"],br={"Content-Type":"application/json"},pr=/^(https?:\/\/)?(www\.)?x\.com\/.+$/i,wr=/^https?:\/\/(www\.)?pixiv\.net\/.+$/i,Ar=async e=>{const t=e.trim();return await new Promise(i=>{setTimeout(()=>{i(pt.some(o=>o.id===t))},200)})?"Artist ID already exists.":!0},_r=async e=>{const t=await fetch("/api/artists",{method:"POST",headers:br,body:JSON.stringify(e)}),s=await t.json();if(!t.ok)throw new Error(s.error||"Failed to add artist")},Vr=()=>{const e=Math.floor(Math.random()*bt.length);return`/portraits/placeholders/${bt[e]}`},he={containerBox:{maxWidth:600,mx:"auto",p:3},artistIdBox:{flex:"1 1 220px",minWidth:220},nameBox:{flex:"1 1 220px",minWidth:220},twitterBox:{flex:"1 1 260px",minWidth:260},pixivBox:{flex:"1 1 260px",minWidth:260},submitButton:{minWidth:150}},Fr=()=>{const{register:e,handleSubmit:t,reset:s,watch:i,setError:o,clearErrors:n,formState:{errors:u,isSubmitting:f}}=St(),b=i("id"),B=oe.useRef(null),w=oe.useCallback(g=>{B.current&&clearTimeout(B.current),B.current=setTimeout(async()=>{const I=await Ar(g.trim());typeof I=="string"&&I.length>0?o("id",{type:"validate",message:I}):n("id")},500)},[o,n]),F=async g=>{const I={id:g.id.trim(),name:g.name.trim(),...g.linkTwitter?.trim()&&{linkTwitter:g.linkTwitter.trim()},...g.linkPixiv?.trim()&&{linkPixiv:g.linkPixiv.trim()},portrait:Vr()};try{await _r(I),alert("Artist added successfully!"),s()}catch(C){alert(`Error: ${C instanceof Error?C.message:"Unknown error"}`)}};return oe.useEffect(()=>{if(!b){n("id");return}w(b)},[b,w,n]),m.jsx(W,{sx:he.containerBox,children:m.jsx("form",{onSubmit:t(F),noValidate:!0,children:m.jsxs(se,{spacing:3,children:[m.jsxs(W,{children:[m.jsx(ee,{variant:"h6",gutterBottom:!0,children:"Artist Information"}),m.jsxs(se,{direction:"row",spacing:2,flexWrap:"wrap",children:[m.jsx(W,{sx:he.artistIdBox,children:m.jsx(J,{label:"Artist ID",error:!!u.id,helperText:u.id?.message,fullWidth:!0,...e("id",{required:"ID is required"}),slotProps:{inputLabel:{shrink:!!i("id")}}})}),m.jsx(W,{sx:he.nameBox,children:m.jsx(J,{label:"Name",error:!!u.name,helperText:u.name?.message,fullWidth:!0,...e("name",{required:"Name is required"}),slotProps:{inputLabel:{shrink:!!i("name")}}})})]})]}),m.jsxs(W,{children:[m.jsx(ee,{variant:"h6",gutterBottom:!0,children:"Links"}),m.jsxs(se,{direction:"row",spacing:2,flexWrap:"wrap",children:[m.jsx(W,{sx:he.twitterBox,children:m.jsx(J,{label:"Twitter Link",error:!!u.linkTwitter,helperText:u.linkTwitter?.message,fullWidth:!0,...e("linkTwitter",{pattern:{value:pr,message:"Invalid Twitter URL"}}),slotProps:{inputLabel:{shrink:!!i("linkTwitter")}}})}),m.jsx(W,{sx:he.pixivBox,children:m.jsx(J,{label:"Pixiv Link",error:!!u.linkPixiv,helperText:u.linkPixiv?.message,fullWidth:!0,...e("linkPixiv",{pattern:{value:wr,message:"Invalid Pixiv URL"}}),slotProps:{inputLabel:{shrink:!!i("linkPixiv")}}})})]})]}),m.jsx(se,{direction:"row",justifyContent:"center",children:m.jsx(Ce,{type:"submit",variant:"contained",disabled:f,sx:he.submitButton,children:f?"Submitting...":"Add Artist"})})]})})})},ve={adminContainer:{m:4,p:3,bgcolor:"background.paper",borderRadius:1,boxShadow:3},header:{mb:3,color:"primary.main",fontWeight:600},contentTitle:e=>({mb:2,pb:1,borderBottom:`2px solid ${e.palette.primary.light}`,color:"primary.main"}),paperFullHeight:{p:3,height:"100%"},accordionMargin:{mb:2}},Dr=()=>{const e=Wt();return m.jsxs(se,{sx:ve.adminContainer,direction:"column",spacing:3,children:[m.jsx(ee,{variant:"h4",component:"h2",sx:ve.header,children:"Admin Dashboard"}),m.jsxs(Mt,{elevation:3,sx:ve.paperFullHeight,children:[m.jsx(ee,{variant:"h6",component:"h3",sx:ve.contentTitle(e),children:"Content Submission"}),m.jsxs(tt,{sx:ve.accordionMargin,children:[m.jsx(rt,{expandIcon:m.jsx(st,{}),children:m.jsx(ee,{variant:"subtitle1",children:"Reddit Posts"})}),m.jsx(it,{children:m.jsx(vr,{})})]}),m.jsxs(tt,{children:[m.jsx(rt,{expandIcon:m.jsx(st,{}),children:m.jsx(ee,{variant:"subtitle1",children:"Artists"})}),m.jsx(it,{children:m.jsx(Fr,{})})]})]})]})},kr=Object.freeze(Object.defineProperty({__proto__:null,default:Dr},Symbol.toStringTag,{value:"Module"})),Cr={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"/src/renderer/+onRenderClient.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Nt}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/admin/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:kr}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"/src/renderer/+config.ts",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}}};export{Cr as configValuesSerialized};
